<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="background">
    <!-- üîπ –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <header class="header">
        <div class="nav">
          <div class="nav-side nav-left">
            <a href="#" class="nav-item">—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
          </div>
      
          <div class="nav-center">
            <img src="img/flower2.png" alt="–¶–≤–µ—Ç–æ–∫" class="flower">
          </div>
      
          <div class="nav-side nav-right">
            <a href="#" class="nav-item">–ø–æ–¥–∞—Ä–∫–∏</a>
          </div>
        </div>
      </header>
      

    <section class="hero">
        <!-- –õ–ï–í–ê–Ø –ü–ê–†–ê –§–û–ù–ê–†–ï–ô -->
        <div class="lanterns left">
          <!-- –ó–ê–î–ù–ò–ô —Ñ–æ–Ω–∞—Ä—å ‚Äî —Å—Ç–∞—Ä–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
          <img src="img/flashlight.png" alt="—Ñ–æ–Ω–∞—Ä—å" class="lantern back">
      
          <!-- –ü–ï–†–ï–î–ù–ò–ô —Ñ–æ–Ω–∞—Ä—å ‚Äî –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –¥–ª–∏–Ω–Ω–æ–π –≤–µ—Ä—ë–≤–∫–æ–π -->
          <div class="lantern-long front">
            <img src="img/flashlight2.png" alt="—Ñ–æ–Ω–∞—Ä—å —Å –¥–ª–∏–Ω–Ω–æ–π –≤–µ—Ä—ë–≤–∫–æ–π">
          </div>
        </div>
      
        <!-- –ü–†–ê–í–ê–Ø –ü–ê–†–ê –§–û–ù–ê–†–ï–ô -->
        <div class="lanterns right">
          <img src="img/flashlight.png" alt="—Ñ–æ–Ω–∞—Ä—å" class="lantern back">
      
          <div class="lantern-long front">
            <img src="img/flashlight2.png" alt="—Ñ–æ–Ω–∞—Ä—å —Å –¥–ª–∏–Ω–Ω–æ–π –≤–µ—Ä—ë–≤–∫–æ–π">
          </div>
        </div>
      
        <img src="img/Chinese_inscription.png" alt="–ù–∞–¥–ø–∏—Å—å" class="inscription">
        <h1>–ü–†–ò–ì–õ–ê–®–ï–ù–ò–ï –ù–ê –î–ï–ù–¨ –†–û–ñ–î–ï–ù–ò–Ø</h1>
      </section>
      
      <section class="event-info">
        <div class="info-card">
          <img src="img/2.1.png" alt="—Ñ–æ–Ω —Å –ø–∞–Ω–¥–∞–º–∏" class="info-img">
          <div class="info-text">
            <p><strong>–î–∞—Ç–∞:</strong> 12 –¥–µ–∫–∞–±—Ä—è 2025 –≥.</p>
            <p><strong>–í—Ä–µ–º—è:</strong> 09:43</p>
            <p><strong>–ú–µ—Å—Ç–æ:</strong> —á–∞–π–Ω–∞—è ¬´–ö—Ä–∞—Å–Ω—ã–π –ñ—É—Ä–∞–≤–ª—å¬ª, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 8</p>
          </div>
        </div>
      </section>
      
      
      <section class="rsvp-section">
        <div class="rsvp-card">
          <img src="img/1.3.png" alt="—Ñ–æ–Ω —Å –±–∞–º–±—É–∫–æ–º" class="rsvp-img">
      
          <form class="rsvp-form">
            <!-- 1. –ò–º—è / —Ñ–∞–º–∏–ª–∏—è -->
            <div class="rsvp-row">
              <input
                type="text"
                class="rsvp-input"
                placeholder="–í–∞—à–µ –∏–º—è  /  –§–∞–º–∏–ª–∏—è"
              >
            </div>
      
            <!-- 2. –ü–æ–π–¥—ë—Ç–µ? –¥–∞ / –Ω–µ—Ç -->
            <div class="rsvp-row rsvp-row-inline">
              <span class="rsvp-label">–ü–æ–π–¥—ë—Ç–µ?</span>
      
              <div class="rsvp-radio-group">
                <input type="radio" id="go-yes" name="go" value="yes" checked>
                <label for="go-yes">–¥–∞</label>
      
                <span class="rsvp-slash">/</span>
      
                <input type="radio" id="go-no" name="go" value="no">
                <label for="go-no">–Ω–µ—Ç</label>
              </div>
            </div>
      

            <!-- 3. –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å + –ø–æ–¥–ø–∏—Å—å -->
            <div class="rsvp-row rsvp-row-inline rsvp-submit-row">
                <button type="submit" class="rsvp-submit">
                    –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
                </button>
                <span class="rsvp-deadline">–æ—Ç–≤–µ—Ç–∏—Ç—å –¥–æ 12.12.12</span>
            </div>
  
          </form>
        </div>
      </section>
      

    <!-- üîπ –ü–æ–¥–∞—Ä–∫–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ -->
<section class="gifts">
    <h2 class="gifts-title">–ü–û–î–ê–†–ö–ò –ò –í–î–û–•–ù–û–í–ï–ù–ò–ï</h2>
  
    <div class="gifts-grid">
      <!-- –∫–∞—Ä—Ç–æ—á–∫–∞ 1 -->
      <a href="https://docs.google.com/document/d/13-m_k3O88hK18vilrefshgFj-pgBFwkCEOnLMYhdfnQ/edit"
         class="gift-card" target="_blank" rel="noopener">
        <img src="img/image1.png" alt="Wishlist 1 ‚Äî Google" class="gift-img">
      </a>
  
      <!-- –∫–∞—Ä—Ç–æ—á–∫–∞ 2 -->
      <a href="https://ohmywishes.ru/users/bc64fb2df839edd614718429"
         class="gift-card" target="_blank" rel="noopener">
        <img src="img/image2.png" alt="Wishlist 2 ‚Äî OhMyWishes" class="gift-img">
      </a>
  
      <!-- –∫–∞—Ä—Ç–æ—á–∫–∞ 3 -->
      <a href="https://pin.it/2UCNRshI4"
         class="gift-card" target="_blank" rel="noopener">
        <img src="img/image3.png" alt="Mood board Pinterest" class="gift-img">
      </a>
    </div>
  </section>  
  </div>


  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector(".rsvp-form");
    
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const selected = form.querySelector('input[name="go"]:checked')?.value;
        if (selected === "yes") {
          showPopupSequence();
        }
        if (selected === "no") {
          // –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ—Å—Ç–∞–≤–∏—Ç "–Ω–µ—Ç" –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–µ ‚Äî —Å—Ä–∞–∑—É –∑–∞–∫—Ä—ã—Ç—å –≤—Å—ë (–Ω–∞ –≤—Å—è–∫–∏–π)
          const ov = document.querySelector('.popup-overlay');
          if (ov) ov.remove();
        }
      });
    
      function showPopupSequence(){ createPopup1(); }
    
      /* 1) –î–∞/–ù–µ—Ç —Å –ø–∞–Ω–¥–æ–π –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ */
      function createPopup1(){
        const {overlay, box} = createPopupBase();
    
        const title = document.createElement("h3");
        box.appendChild(title);
    
        // –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–ª–æ–≤–∏–Ω–∫–∞–º–∏
        const choice = document.createElement("div");
        choice.className = "popup-choice";
    
        // radio + labels
        const rYes = document.createElement("input");
        rYes.type = "radio"; rYes.name = "plus1"; rYes.id = "p-yes";
    
        const rNo  = document.createElement("input");
        rNo.type  = "radio"; rNo.name  = "plus1"; rNo.id  = "p-no";
    
        const labYes = document.createElement("label");
        labYes.className = "popup-half left";
        labYes.htmlFor  = "p-yes";
        labYes.textContent = "–¥–∞";
    
        const labNo  = document.createElement("label");
        labNo.className  = "popup-half right";
        labNo.htmlFor    = "p-no";
        labNo.textContent = "–Ω–µ—Ç";
    
        // –ø–∞–Ω–¥–∞ –Ω–∞–¥ —à–≤–æ–º
        const panda = document.createElement("img");
        panda.src = "img/pand.png";
        panda.className = "popup-panda-bridge";
    
        choice.append(rYes, rNo, labYes, labNo, panda);
        box.appendChild(choice);
    
        // –ª–æ–≥–∏–∫–∞: –¥–∞ ‚Üí —Å–ª–µ–¥—É—é—â–µ–µ –æ–∫–Ω–æ; –Ω–µ—Ç ‚Üí –∑–∞–∫—Ä—ã—Ç—å overlay
        labYes.addEventListener("click", () => {
          overlay.remove();
          createPopup2();
        });
    
        labNo.addEventListener("click", () => {
          overlay.remove();               // —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω —É—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É
          // –Ω–∏—á–µ–≥–æ –¥–∞–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
        });
      }
    
      /* 2) –ü–æ–ª–µ –≤–≤–æ–¥–∞ + –û—Ç–ø—Ä–∞–≤–∏—Ç—å */
      function createPopup2(){
        const {overlay, box} = createPopupBase();
    
        const title = document.createElement("h3");
        box.appendChild(title);
    
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "–ö–æ–≥–æ?";
        input.className = "popup-input";
        box.appendChild(input);
    
        const okBtn = document.createElement("button");
        okBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
        okBtn.className = "popup-ok";
        box.appendChild(okBtn);
    
        okBtn.addEventListener("click", () => {
          overlay.remove();
          createPopup3("–∑–∞—è–≤–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ —É –°–∏ –¶–∑–∏–Ω—å–ø–∏–Ω–∞");
        });
      }
    
      /* 3) –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ + –û–ö */
      function createPopup3(message){
        const {overlay, box} = createPopupBase();
    
        const title = document.createElement("h3");
        box.appendChild(title);
    
        const text = document.createElement("p");
        text.className = "popup-message";
        text.textContent = message;
        box.appendChild(text);
    
        const ok = document.createElement("button");
        ok.className = "popup-ok";
        ok.textContent = "OK";
        box.appendChild(ok);
    
        ok.addEventListener("click", () => overlay.remove());
      }
    
      /* –ë–∞–∑–∞ –æ–∫–Ω–∞ ‚Äî —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º overlay –∏ box, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å */
      function createPopupBase(){
        const overlay = document.createElement("div");
        overlay.className = "popup-overlay";
    
        const box = document.createElement("div");
        box.className = "popup-box";
    
        const bg = document.createElement("img");
        bg.src = "img/pov.png";
        bg.className = "popup-bg";
    
        box.appendChild(bg);
        overlay.appendChild(box);
        document.body.appendChild(overlay);
        return {overlay, box};
      }
    });
    </script>
    
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const regLink = document.querySelector('.nav-left a');
        const giftsLink = document.querySelector('.nav-right a');
        const rsvpSection = document.querySelector('.rsvp-section');
        const giftsSection = document.querySelector('.gifts');
    
        // –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É (–ø–æ–¥ —à–∞–ø–∫—É/–≤–∏–∑—É–∞–ª—å–Ω—ã–π –≤–æ–∑–¥—É—Ö)
        const OFFSET = 140; // –ø–æ–¥–ø—Ä–∞–≤—å –ø–æ –≤–∫—É—Å—É: 100‚Äì180px
    
        function smoothScrollTo(el, offset = 0) {
          // –¢–µ–∫—É—â–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
          const current = window.pageYOffset || document.documentElement.scrollTop;
          // –ü–æ–∑–∏—Ü–∏—è —Å–µ–∫—Ü–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—å—é–ø–æ—Ä—Ç–∞
          const rectTop = el.getBoundingClientRect().top;
          // –ö—É–¥–∞ –µ–¥–µ–º: —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ + –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ - –æ—Ç—Å—Ç—É–ø
          let targetY = current + rectTop - offset;
    
          // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã
          const maxY = document.documentElement.scrollHeight - window.innerHeight;
          if (targetY < 0) targetY = 0;
          if (targetY > maxY) targetY = maxY;
    
          window.scrollTo({ top: targetY, behavior: 'smooth' });
        }
    
        regLink.addEventListener('click', (e) => {
          e.preventDefault();
          smoothScrollTo(rsvpSection, OFFSET);
        });
    
        giftsLink.addEventListener('click', (e) => {
          e.preventDefault();
          // –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—É—Ç—å –º–µ–Ω—å—à–µ/–±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –±–ª–æ–∫–∞
          smoothScrollTo(giftsSection, OFFSET);
        });
      });
    </script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const regLink = document.querySelector('.nav-left a');
  
    // –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å
    const SCROLL_DISTANCE = 600; // –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å: 400, 800 –∏ —Ç.–¥.
  
    regLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollBy({
        top: SCROLL_DISTANCE,
        left: 0,
        behavior: 'smooth' // –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
      });
    });
  });

    async function createRsvp({ name, surname, going }) {
      const res = await fetch('/api/rsvp', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, surname, going })
      });
      const json = await res.json();
      if (!res.ok || !json.ok) throw new Error(json.error || 'Create failed');
      return json.rsvp; // –≤–µ—Ä–Ω—ë—Ç—Å—è –æ–±—ä–µ–∫—Ç –∑–∞–ø–∏—Å–∏, –≤–∫–ª—é—á–∞—è id
    }

  let lastRsvpId = null;
  
  async function onMainSubmit() {
    const name = document.querySelector('.rsvp-input[name="name"]').value;
    const surname = document.querySelector('.rsvp-input[name="surname"]').value;
    const going = document.querySelector('#go-yes').checked;
  
    const r = await createRsvp({ name, surname, going });
    lastRsvpId = r.id;
  }

  async function updatePlusOne({ id, wants, who }) {
    const res = await fetch('/api/rsvp-plus-one', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        id,
        plus_one_wants: wants,
        plus_one_name: who || null
      })
    });
    const json = await res.json();
    if (!res.ok || !json.ok) throw new Error(json.error || 'Update failed');
    return json.rsvp;
  }
  </script>
  
</body>
</html>
